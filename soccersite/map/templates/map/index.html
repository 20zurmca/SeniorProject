<!DOCTYPE html>

{% load static %}
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <!-- bootstrap stuff -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <!-- google font -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Cabin&display=swap">

    <!-- tail select -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/tail.select@latest/css/bootstrap4/tail.select-default.css">
    <!-- map applicaton static files -->
    <link rel="shortcut icon" href="{% static 'map/img/favicon.ico' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'map/css/stylesheet.css' %}">

    <title>Lafayette Soccer Project</title>
  </head>
  <body>
    <div class="container-bgimage">
      <div class="header-button">
        <button type="button" class="btn btn-primary bg-dark btn-sm"
        aria-pressed="true" id="button3">
          Admin Login
        </button>

        <button type="button" class="btn btn-primary bg-dark btn-sm"
        aria-pressed="true" id="button4">
          About
        </button>
      </div>

      <div class="header">
        <h2 id="name">Soccer Hotspots</h2>
        <p id="instruction">
          Select filters to find players of interest. Then, click the submit button
          to view their high schools.
        </p>
      </div>

      <div class="fouc">
        <div class="selectors">
          <form method="POST" id="filterForm">
            {% csrf_token %}
            <select class="select-search" multiple name="collegeLeagues" id="collegeLeagueSelector">
                <optgroup label="College League">
                  {% for league in leagues %}
                    <option value="{{league}}" id="{{league}}">{{league}}</option>
                  {% endfor %}
                </optgroup>
            </select>

            <select class="select-search" multiple name="colleges" id="collegeSelector">
                <optgroup label="College">
                   {% for college in colleges %}
                      <option value="{{college}}" id="{{college}}">{{college}}</option>
                   {% endfor %}
                </optgroup>
            </select>

            <select class="select-search" multiple name="positions" id="positionSelector">
                <optgroup label="Position">
                    {% for position in positions %}
                      {% if position and position.strip %} <!-- do not include empty positions -->
                      <option>{{position}}</option>
                      {% endif %}
                    {% endfor %}
                </optgroup>
            </select>

            <select class="select" multiple name="starterYears" id="starterSelector">
                <option>0</option>
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4+</option>
            </select>

            <select class="select" multiple name="allConferenceYears" id="allConferenceSelector">
                <option>0</option>
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4+</option>
            </select>

            <div class = "submit-button">
              <input type="submit" class="btn btn-primary btn-lg" value="Submit" id="button1"></input>
            </div>
          </form>
        </div>
      </div>

    <div id = "map"></div>
    </div>

    <div class = "csv-button">
      <button type="button" class="btn btn-primary btn-small" aria-pressed="true" id="button2">
        CSV
      </button>
    </div>
    <div class = "table">
      <!--TODO: work on the table -->
      <table class="table table-striped table-hover table-dark" id="resultTable">
        <thead>
          <tr>
            <th scope="col">Roster Year</th>
            <th scope="col">First Name</th>
            <th scope="col">Last Name</th>
            <th scope="col">Class Year</th>
            <th scope="col">Position</th>
            <th scope="col">Years Starter</th>
            <th scope="col">Years All-Conference</th>
            <th scope="col">League</th>
            <th scope="col">College</th>
            <th scope="col">Hometown</th>
            <th scope="col">State or Country</th>
            <th scope="col">High School</th>
          </tr>
        </thead>
        <tbody>
          {% for player in players %}
          <tr>
            <td>{{player.rosterYear}}</td>
            <td>{{player.firstName}}</td>
            <td>{{player.lastName}}</td>
            <td>{{player.year}}</td>
            <td>{{player.position1}}</td>
            <td>will implement</td>
            <td>will implement</td>
            <td>{{player.collegeLeague}}</td>
            <td>{{player.college}}</td>
            <td>{{player.homeTown}}</td>
            <td>{{player.stateOrCountry}}</td>
            <td>{{player.highSchool}}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    {{jsData|json_script:"playerData"}}
    <!-- jQuery library -->
    <script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
    crossorigin="anonymous"></script>
    <!-- underscore Library -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.9.1/underscore-min.js"></script>

    <!-- get query data from the view and send to the template so map.js can see it -->
    <script> var playerData = JSON.parse(document.getElementById('playerData').textContent); </script>
    <script src="{% static 'map/js/map.js' %}"></script>
    <script src="{% static 'map/js/homePageButtons.js' %}"></script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key={{API_KEY}}&libraries=visualization&callback=initMap"></script>

   <!-- Popper js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
     crossorigin="anonymous"></script>
   <!--Bootstrap.js -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>
    <!--Tail select -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/tail.select@0.5.15/js/tail.select.min.js"></script>
    <script src="{% static 'map/js/selectors.js' %}"></script>
    <script src="{% static 'map/js/form.js' %}"></script>
    <!-- eliminating flash of unstyled content (FOUC) -->
    <script>
      $(document).ready(function(){
        $('.fouc').css({"visibility": "visible"});
      });
    </script>
  </body>
</html>
